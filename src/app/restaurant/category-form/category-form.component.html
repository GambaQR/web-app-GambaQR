<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
  <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg w-full max-w-md max-h-[90vh] overflow-y-auto text-gray-900 dark:text-white">
    <div class="p-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-xl font-bold">{{ category ? "Editar Categoría" : "Nueva Categoría" }}</h2>
        <button (click)="onCancel.emit()" class="flex items-center justify-center p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-gray-600 dark:text-gray-400">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4">
            <path d="M18 6 6 18"></path>
            <path d="m6 6 12 12"></path>
          </svg>
        </button>
      </div>

      <form [formGroup]="categoryForm" (ngSubmit)="handleSubmit()" class="space-y-4">
        <div>
          <label for="name" class="block text-sm font-light text-gray-600 dark:text-gray-400 mb-1">Nombre de la Categoría *</label>
          <input
            id="name"
            formControlName="name"
            placeholder="Ej: Platos Principales"
            class="w-full px-3 py-2 rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 transition-colors outline outline-gray-600 dark:outline-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-purple-600 focus:shadow-[0_0_3px_0px] focus:shadow-purple-600"
            [ngClass]="{'border-red-500': confirmarCampo('name')}"
          />
          <p *ngIf="confirmarCampo('name') && categoryForm.get('name')?.hasError('required')" class="text-red-500 text-sm mt-1">El nombre es requerido.</p>
        </div>

        <div>
          <label for="description" class="block text-sm font-light text-gray-600 dark:text-gray-400 mb-1">Descripción *</label>
          <textarea
            id="description"
            formControlName="description"
            placeholder="Describe esta categoría..."
            class="w-full px-3 py-2 rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 transition-colors outline outline-gray-600 dark:outline-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-purple-600 focus:shadow-[0_0_3px_0px] focus:shadow-purple-600 min-h-[80px]"
            [ngClass]="{'border-red-500': confirmarCampo('description')}"
          ></textarea>
          <p *ngIf="confirmarCampo('description') && categoryForm.get('description')?.hasError('required')" class="text-red-500 text-sm mt-1">La descripción es requerida.</p>
        </div>

        <div>
          <label class="block text-sm font-light text-gray-600 dark:text-gray-400 mb-1">Icono de la Categoría</label>
          <div class="grid grid-cols-6 gap-2 mt-2">
            <button
              *ngFor="let icon of iconOptions"
              type="button"
              (click)="selectIcon(icon)"
              class="p-2 text-2xl border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"
              [ngClass]="{
                'border-purple-600 dark:border-purple-400 bg-purple-50 dark:bg-purple-900/20': categoryForm.get('icon')?.value === icon,
                'border-gray-200 dark:border-gray-700': categoryForm.get('icon')?.value !== icon
              }"
            >
              {{ icon }}
            </button>
          </div>
        </div>

        <div>
          <label for="order" class="block text-sm font-light text-gray-600 dark:text-gray-400 mb-1">Orden de Visualización *</label>
          <input
            id="order"
            formControlName="order"
            type="number"
            min="1"
            class="w-full px-3 py-2 rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 transition-colors outline outline-gray-600 dark:outline-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-purple-600 focus:shadow-[0_0_3px_0px] focus:shadow-purple-600"
            [ngClass]="{'border-red-500': confirmarCampo('order')}"
          />
          <p *ngIf="confirmarCampo('order') && categoryForm.get('order')?.hasError('required')" class="text-red-500 text-sm mt-1">El orden es requerido.</p>
          <p *ngIf="confirmarCampo('order') && categoryForm.get('order')?.hasError('min')" class="text-red-500 text-sm mt-1">El orden debe ser mayor a 0.</p>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Determina el orden en que aparece en el menú</p>
        </div>

        <div class="flex items-center space-x-2">
          <input
            type="checkbox"
            id="isActive"
            formControlName="isActive"
            class="rounded border-gray-300 dark:border-gray-600 text-purple-600 shadow-sm focus:ring-purple-500 bg-white dark:bg-gray-700"
          />
          <label for="isActive" class="text-sm font-light text-gray-600 dark:text-gray-400">Categoría activa</label>
        </div>

        <div class="flex gap-2 pt-4">
          <button type="submit" class="flex-1 bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-lg transition-colors shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
            {{ category ? "Actualizar" : "Crear" }} Categoría
          </button>
          <button type="button" (click)="onCancel.emit()" class="flex-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium py-2 px-4 rounded-lg transition-colors shadow-sm">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>